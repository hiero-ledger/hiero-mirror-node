[![Build](https://github.com/hiero-ledger/hiero-mirror-node/actions/workflows/gradle.yml/badge.svg)](https://github.com/hiero-ledger/hiero-mirror-node/actions)
[![Codacy Grade](https://app.codacy.com/project/badge/Grade/e0e3a2f2770644eaa5cfc7b274569a3a)](https://app.codacy.com/gh/hiero-ledger/hiero-mirror-node/dashboard?utm_campaign=Badge_grade)
[![Codacy Coverage](https://app.codacy.com/project/badge/Coverage/e0e3a2f2770644eaa5cfc7b274569a3a)](https://app.codacy.com/gh/hiero-ledger/hiero-mirror-node/dashboard?utm_campaign=Badge_coverage)
[![Discord](https://img.shields.io/badge/discord-join%20chat-blue.svg)](https://discord.com/channels/905194001349627914/1289954446712770600)
[![OpenSSF Scorecard](https://api.scorecard.dev/projects/github.com/hiero-ledger/hiero-mirror-node/badge)](https://api.scorecard.dev/projects/github.com/hiero-ledger/hiero-mirror-node)
[![CII Best Practices](https://bestpractices.coreinfrastructure.org/projects/10697/badge)](https://bestpractices.coreinfrastructure.org/projects/10697)

# Mirror Node

The mirror node acts as an archive node and stores historical data for a Hiero-based network.

## Overview

Mirror nodes receive information from consensus nodes and can provide value-added services such as APIs, auditing,
analytics, visibility services, security threat modeling, data monetization services, etc. Mirror nodes can also run
additional business logic to support applications built using a Hiero-based network.

While mirror nodes receive information from consensus nodes, they do not contribute to consensus on the network, and
their votes are not counted. Only the votes from the consensus nodes are counted for determining consensus. The trust of
the network is derived based on the consensus reached by consensus nodes. That trust is transferred to the mirror
nodes using cryptographic signatures on a chain of files.

Eventually, the mirror nodes will be able to run the same code as consensus nodes so that they can see the transactions
in real time. To make the initial deployments easier, the mirror node strives to take away the burden of running a full
consensus node through creation of periodic files that contain processed transactions and have the full trust of the
network. The mirror node software reduces the processing burden by receiving batched files from the network,
validating those, populating its database, and providing APIs to expose the data. This approach provides the following
advantages:

- Lower compute and bandwidth requirements
- Allow users to only save the data that they care about (lower storage requirement)
- Index the data to facilitate efficient retrieval
- Expose the data via APIs to make integrations faster

## Architecture

### Consensus Nodes

- When a transaction reaches consensus, consensus nodes add the transaction and its associated record to a
  [record file](https://github.com/hashgraph/hedera-protobufs/blob/main/streams/record_stream_file.proto).
- Record files contain the hash of the previous record file, thus creating an unbreakable validation chain.
- The file is closed on a regular cadence, and a signature file is generated by the node for the record file.
- The record and signature files from each node are then uploaded to Amazon S3 and Google Cloud Storage.

### Mirror Nodes

- This mirror node software downloads signature files from cloud storage.
- The signature files are verified using the corresponding node's public key from the address book.
- The verified signature files are checked to ensure at least 1/3 have the same record file hash.
- For each valid signature file, the corresponding record file is then downloaded from cloud storage and its hash is
  verified against the hash contained in the signature file.
- The downloaded record file contains a previous hash that is validated against the last processed file to verify the
  hash chain.
- Record files can then be processed and transactions and records processed for long term storage.

## Getting Started

### Prerequisite Tools

Ensure these tools are installed (note minimum versions) prior to running the mirror node:

- [Docker Desktop 4.28+](https://www.docker.com/products/docker-desktop)

### Running

For production use, we recommend using Kubernetes and to deploy using our Helm [chart](charts). Hedera managed mirror
nodes use Kubernetes and Helm for their deployments, and this process is considered the most production-ready. As an
alternative for local development, Docker Compose can be used to run the mirror node. See
the [installation](docs/installation.md#running-via-docker-compose) document for more details on configuring and running
with Docker Compose. To get up and running quickly with Docker Compose execute the following commands in your terminal:

```bash
git clone https://github.com/hiero-ledger/hiero-mirror-node.git
cd hiero-mirror-node
docker compose up
```

> **_NOTE:_** This defaults to a bucket setup for demonstration purposes. See the next section for more details.

## Data Access

### Demo

The free option uses a bucket setup for demonstration purposes. This is simply a dummy bucket populated with a day's
worth of past testnet data. This is the default option and requires no additional steps. Once you've verified your
deployment works against the demo bucket, remember to configure it with a [public network](#public-networks), then wipe
the database and restart the mirror node.

### Public Networks

To access data from Hiero-based networks,
[AWS](https://docs.aws.amazon.com/AmazonS3/latest/dev/RequesterPaysBuckets.html) or
[GCS](https://cloud.google.com/storage/docs/requester-pays) requester pays credentials must be used. The charges
associated with the downloading of stream files are paid for by the requester and not the bucket owner. See
the [Run Your Own Mirror Node](https://docs.hedera.com/hedera/core-concepts/mirror-nodes/run-your-own-beta-mirror-node)
documentation for more information.

## Documentation

- Components
  - [GraphQL API](docs/graphql/README.md)
  - [gRPC API](docs/grpc/README.md)
  - [Importer](docs/importer/README.md)
  - [Monitor](docs/monitor/README.md)
  - [REST API](docs/rest/README.md)
  - [REST Java API](docs/rest-java/README.md)
  - [Rosetta API](docs/rosetta/README.md)
  - [Web3 API](docs/web3/README.md)
- [Configuration](docs/configuration.md)
- [Development Guide](docs/development.md)
- [Contributing](docs/contributing.md)
- [Installation](docs/installation.md)
- [Troubleshooting](docs/troubleshooting.md)

## Releasing

To perform a new release, run the `Automated Release` GitHub workflow.

## Contributing

Whether you’re fixing bugs, adding new features, or improving documentation, your contributions are important — let's
build something great together! Please read our Hiero
[contributing guide](https://github.com/hiero-ledger/.github/blob/main/CONTRIBUTING.md) as well as our project-specific
[contributing guide](docs/contributing.md) to see how you can get involved.

For detailed instructions on setting up a local development environment refer to the
[Development Guide](docs/development.md).

Our role guidelines can be found under **[Hiero-Ledger's roles and groups guidelines](https://github.com/hiero-ledger/governance/blob/main/roles-and-groups.md#maintainers).**

## Code of Conduct

Hiero uses the Linux Foundation Decentralised Trust [Code of Conduct](https://www.lfdecentralizedtrust.org/code-of-conduct).

## License

[Apache License 2.0](LICENSE)
